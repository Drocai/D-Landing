<!DOCTYPE html>
<html>
<head>
    <title>Supabase Test</title>
</head>
<body>
    <h1>Testing Supabase Connection</h1>
    <div id="result"></div>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const SUPABASE_URL = 'https://skytldwvwkfulytqnuac.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_3pwfy4YCOqGYsBNtWupSVw_ziIAyjh2';
        const { createClient } = window.supabase;
        
        console.log('Creating Supabase client...');
        const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);
        console.log('Client created:', supabase);
        
        async function test() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = 'Testing connection...<br>';
            
            // Test tracks fetch
            console.log('Fetching tracks...');
            const { data: tracks, error: tracksError } = await supabase
                .from('tracks')
                .select('*')
                .order('id', { ascending: true });
            
            console.log('Tracks result:', { tracks, tracksError });
            resultDiv.innerHTML += `Tracks: ${tracksError ? 'Error: ' + JSON.stringify(tracksError) : 'Success: ' + tracks.length + ' found'}<br>`;
            
            // Test posts fetch
            console.log('Fetching posts...');
            const { data: posts, error: postsError } = await supabase
                .from('posts')
                .select('*')
                .eq('visibility', 'public')
                .order('created_at', { ascending: false });
            
            console.log('Posts result:', { posts, postsError });
            resultDiv.innerHTML += `Posts: ${postsError ? 'Error: ' + JSON.stringify(postsError) : 'Success: ' + posts.length + ' found'}<br>`;
        }
        
        test();
    </script>
</body>
</html>
